<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">

<head profile="http://gmpg.org/xfn/11">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>Emulator Development  </title>

<link rel="stylesheet" href="wp-content/themes/default/style.css" type="text/css" media="screen" />
<link rel="alternate" type="application/rss+xml" title="Emulator Development RSS Feed" href="indexd784.html?feed=rss2" />
<link rel="pingback" href="xmlrpc.html" />

<style type="text/css" media="screen">

	#page { background: url("wp-content/themes/default/images/kubrickbgwide.jpg") repeat-y top; border: none; }

</style>

<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 2.5.1" />

</head>
<body>
<div id="page">


<div id="header">
	<div id="headerimg">
		<h1><a href="index.html">Emulator Development</a></h1>
		<div class="description">The art of emulator programming</div>
	</div>
</div>
<hr />

	<div id="content" class="narrowcolumn">

	
		
			<div class="post" id="post-30">
				<h2><a href="index5643.html?p=30" rel="bookmark" title="Permanent Link to Update">Update</a></h2>
				<small>May 10th, 2010 <!-- by codeslinger --></small>

				<div class="entry">
					<p>Hi all</p>
<p>Sorry it has been so long since my last update. I&#8217;ve had projects that took higher priority than my emulation development. I still have very little free time to work on emulation but I will make more of an effort to make time for it and this site.</p>
<p>I will start looking back into gameboy sound emulation and will write a tutorial on it when I finish.</p>
<p>Also I wanted to say thanks to those of you who have left positive comments, it is appreciated. Ive been searching the internet and Â found a few people using my tutorials for their own emulators which is great to see.</p>
<p>Thanks</p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexb31a.html?cat=1" title="View all posts in Uncategorized" rel="category">Uncategorized</a> |   <a href="index5643.html?p=30#comments" title="Comment on Update">4 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-28">
				<h2><a href="index3c55.html?p=28" rel="bookmark" title="Permanent Link to Gameboy Sound Emulation Update">Gameboy Sound Emulation Update</a></h2>
				<small>May 6th, 2009 <!-- by codeslinger --></small>

				<div class="entry">
					<p>Well I have implemented all 4 channels and individually they sound correct. When I combine them though there is a serious issue. Although I can still hear each channel playing correctly it is like the mixing is causing the seperate channels to be playing at the wrong volume. Still it shouldnt be too long until I have it working. Expect a gameboy sound tutorial soon. Im hoping to be on to my Sega Mega Drive/Genesis emulator by the start of June</p>
<p>CS.</p>
				</div>

				<p class="postmetadata"> Posted in <a href="index81ea.html?cat=3" title="View all posts in Gameboy" rel="category">Gameboy</a> |   <a href="index3c55.html?p=28#comments" title="Comment on Gameboy Sound Emulation Update">34 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-27">
				<h2><a href="index1c4a.html?p=27" rel="bookmark" title="Permanent Link to Gameboy sound emulation">Gameboy sound emulation</a></h2>
				<small>April 27th, 2009 <!-- by codeslinger --></small>

				<div class="entry">
					<p>Well I have finally started sound emulation for the gameboy and am finding it much more difficult than the SMS. There really seems to be a lack of sound emulation resources on the net. For the time being I am only emulating the two square waves as I have experience with how these work from the SMS. Although I have implemented everything to do with the square waves it still isnt producing the correct tune. The beat seems correct but the notes are completely off. Still encouraging though as this was exactly how my SMS sounded a day or two before I cracked it.</p>
<p>On a slightly annoying note my trunk svn gameboy dev seems to have a few bugs in the vdp and cpu that have appeared out of nowhere. I might look into redeveloping my Gameboy emulator when I have finished the sound as the knowledge I have gained from developing the SMS I feel I could take it to the next level. Still I&#8217;m getting impatient to start my mega drive/genesis emulator&#8230;</p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="index81ea.html?cat=3" title="View all posts in Gameboy" rel="category">Gameboy</a> |   <a href="index1c4a.html?p=27#respond" title="Comment on Gameboy sound emulation">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-26">
				<h2><a href="index88b9.html?p=26" rel="bookmark" title="Permanent Link to SMS tutorials complete">SMS tutorials complete</a></h2>
				<small>March 17th, 2009 <!-- by codeslinger --></small>

				<div class="entry">
					<p>Well it has taken me a ridiculous amount of time to pull my finger out and complete the SMS tutorials, but I have finally finished. You can view these tutorials <a href="../../../../www.codeslinger.co.uk/pages/projects/mastersystem.html">here</a></p>
<p>I feel more motivated lately to continue wih my emulation work after a few months break. I&#8217;ll more than likely optimize my gameboy emulator and add sound to it next.</p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexaa1e.html?cat=4" title="View all posts in Sega Master System" rel="category">Sega Master System</a> |   <a href="index88b9.html?p=26#comments" title="Comment on SMS tutorials complete">1 Comment &#187;</a></p>
			</div>

		
			<div class="post" id="post-25">
				<h2><a href="index970c.html?p=25" rel="bookmark" title="Permanent Link to Still Alive">Still Alive</a></h2>
				<small>February 3rd, 2009 <!-- by codeslinger --></small>

				<div class="entry">
					<p>Just a quick note to let you all know that Im still alive and kicking. I have completed most of my SMS emulation tutorials which can be found <a href="../../../../www.codeslinger.co.uk/pages/projects/mastersystem.html">here</a>. All that is left to do is the VDP emulation tutorial which Ive mostly written so expect it in the next few days.</p>
<p>Whilst writing these tutorials I have had one eye on the sega mega drive/genesis hardware notes so hopefully soon I can start emulating this system. This system looks very interesting and should be a good step up in difficulty.</p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexb31a.html?cat=1" title="View all posts in Uncategorized" rel="category">Uncategorized</a> |   <a href="index970c.html?p=25#comments" title="Comment on Still Alive">4 Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-24">
				<h2><a href="index2cf9.html?p=24" rel="bookmark" title="Permanent Link to SMS Emu completion">SMS Emu completion</a></h2>
				<small>December 18th, 2008 <!-- by codeslinger --></small>

				<div class="entry">
					<p>I am ready to release the first version of my sega master system emulator. It has approximately 95% compatibility which is enough for me to start writing the SMS tutorials and upload them to the main site. Hopefully I should have them written by the end of the week and I can go back to my Gameboy emulator and implement sound.</p>
<p>The SMS has been a really fun project and I&#8217;ve learnt a lot more about emulation programming from it, but have also realised how much left there is to learn. Hopefully my next emulator (Sega Mega Drive/Genesis) will have more advance emulation techniques.</p>
<p>Keep watching this space for the release of my emulator along with source code and the &#8220;how-to&#8221; tutorials.</p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexaa1e.html?cat=4" title="View all posts in Sega Master System" rel="category">Sega Master System</a> |   <a href="index2cf9.html?p=24#respond" title="Comment on SMS Emu completion">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-23">
				<h2><a href="index40a0.html?p=23" rel="bookmark" title="Permanent Link to Sound Emulation">Sound Emulation</a></h2>
				<small>December 16th, 2008 <!-- by codeslinger --></small>

				<div class="entry">
					<p>I&#8217;ve been searching the internet recently trying to find some good documentation on sound emulation. None exist. Hopefully when I finish my emulator and write my &#8220;how to emulate the sega master system&#8221; tutorial on my site, the section on sound emulation should be a good resource to new programmers.</p>
<p>I have found a good article on the SMS sound chip SN79489 written by Maxim which explains how it works, and I have been programming in the dark trying to implement this into my emu. I believe my sound emulator is now 100% complete with the tiny problem that it doesnt seem to be synchronised with the cpu so the frequency of the music is incorrect. Apart from this it seems to be working fine.</p>
<p>Now im on my christmas holidays I should have enough time to get my SMS emulator finished by the end of the week which will be a great achievement. As soon as it&#8217;s finished I&#8217;ll write the tutorials for it and then go back to my gameboy emulator to tweak it and emulate sound before moving on to the sega mega drive, which im really looking forward to.</p>
<p>Merry Christmas all</p>
<p>CS.</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexaa1e.html?cat=4" title="View all posts in Sega Master System" rel="category">Sega Master System</a> |   <a href="index40a0.html?p=23#respond" title="Comment on Sound Emulation">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-21">
				<h2><a href="index3965.html?p=21" rel="bookmark" title="Permanent Link to Debugging an emulator is a pain">Debugging an emulator is a pain</a></h2>
				<small>November 10th, 2008 <!-- by codeslinger --></small>

				<div class="entry">
					<p>Well this week I&#8217;ve entered a world of pain with my emulator debugger. First of all I had to debug street fighter to see why it wasnt working and it turned out that it was relying on the reading of the mapper control registers (0xFFFC-0xFFFF) to return the values of the mapped address of 0xDFFC-0xDFFF. As soon as I put this into the game I had immediate success.</p>
<p>I finally managed to get mode 2 sprite emulation working which was down to a really stupid error on my part.</p>
<p>Finally I&#8217;ve been debugging why my code masters larger res screen doesnt work and why the graphics are screwy in mortal kombat.</p>
<p>Luckily for me they were both the same error. The error was with my 8 and 16 bit opcodes for adc and sbc. Now this is how I emulated 8 bit adc (for when adding register c to register a):</p>
<blockquote><p><em>BYTE before = m_RegisterAF.hi ;<br />
BYTE toAdd = m_RegisterBC.lo ;</em></p>
<p><em>if (isCarrySet)<br />
toAdd++ ;</em></p>
<p><em>m_RegisterAF.hi += toAdd ;</em></p>
<p><em>if ((before + toAdd) &gt; 0xFF)<br />
SetCarryFlag() ;<br />
else<br />
ResetCarryFlag() ;</em></p>
<p><em>// code to work out the other flags </em></p></blockquote>
<p>Can you spot whats wrong with the above code?</p>
<p>Solution:<br />
At first glance this looks fine however think what would happen if register C was 0xFF? When the carry gets added the toAdd variable wraps back round to 0. So register a stays set to 0xFF which is correct, however the setting of the c flag never gets set. This was causing the following instruction in mortal kombat (jump if carry is set) to fail.</p>
<p>That took me ages to find!</p>
<p>However both mortal kombat and micro machines are playable. My main concern now is why half of the games I play suffer from graphic flicker&#8230;. Better get my debugger back out.</p>
<p>Fortunately this is the last of the big bugs that need debugging and then it&#8217;s on to sound emulation (oh joy). However the end feels just round the corner.</p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexaa1e.html?cat=4" title="View all posts in Sega Master System" rel="category">Sega Master System</a> |   <a href="index3965.html?p=21#respond" title="Comment on Debugging an emulator is a pain">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-20">
				<h2><a href="index341b.html?p=20" rel="bookmark" title="Permanent Link to Testing does not prove the absence of bugs, only the presence">Testing does not prove the absence of bugs, only the presence</a></h2>
				<small>November 2nd, 2008 <!-- by codeslinger --></small>

				<div class="entry">
					<p>If any of you are writing a Z80 emulator then take it from me dont rely on zexall too much. If zexalls output says you have a bug then you most definately do. However if it says that the test went ok it doesnt mean that they are bug free.</p>
<p>I managed to fix a bug in my emulator without zexalls help which was causing a few games to display the background incorrectly. Mainly Lemmings and Land of Illusion. This bug has been haunting me for awhile so im quite relieved to have fixed it.</p>
<p>I have recently found out that some games run at the wrong speed with my emulator so after checking all my opcodes to see if they are emulating their cycles correctly I was left with the conclusion it must be an error with my vsync emultion. Sure enough I wasnt moving on to the next scanline quick enough which was causing too few vsync interrupts to occur which is one of the main way speed is controlled in games. This is now fixed (after a day of headache) and all games play at the correct speed ( or should I say all tested games? <img src='wp-includes/images/smilies/icon_smile.gif' alt=':)' class='wp-smiley' /> )</p>
<p>Over the past few days I have also emulated the none maskable reset interrupt, the different screen resolution controlled by the current vdp mode and the codemasters mapper. Although the codemasters mapper is implemented correctly the majority of the games show issues with background rendering. However I believe this to be a problem with the background rendering routine rather than the mapper iteself because there is not much room for error with the mapper (compared to the sega mapper anyway).</p>
<p><img src="../../../../www.codeslinger.co.uk/pages/projects/mastersystem/images/lemmings.png" alt="" /></p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexaa1e.html?cat=4" title="View all posts in Sega Master System" rel="category">Sega Master System</a> |   <a href="index341b.html?p=20#respond" title="Comment on Testing does not prove the absence of bugs, only the presence">No Comments &#187;</a></p>
			</div>

		
			<div class="post" id="post-19">
				<h2><a href="index5831.html?p=19" rel="bookmark" title="Permanent Link to Checklist">Checklist</a></h2>
				<small>October 29th, 2008 <!-- by codeslinger --></small>

				<div class="entry">
					<p>I&#8217;m starting to come to the end of my master system emulator and thought it best to make a list of what needsÂ  doing before I start writing the tutorials.</p>
<p><strong>Easy:</strong></p>
<ul>
<li><span style="color: #000000;">All control pad buttons including player 2 (<strong>Implemented</strong>)<br />
</span></li>
<li><span style="color: #000000;">Correct Game Speed (<strong>Fixed</strong>)</span></li>
<li><span style="color: #000000;">Reset Interrupt (<strong>Fixed</strong>)</span></li>
<li><span style="color: #000000;">CodeMasters Mapper (<strong>Fixed</strong>)</span></li>
</ul>
<p><strong>Medium:</strong></p>
<ul>
<li><span style="color: #000000;">Zexall test completion (<strong>Fixed</strong>)<br />
</span></li>
<li><span style="color: #000000;">Speed optimizations (<strong>Implemented</strong>)<br />
</span></li>
<li><span style="color: #000000;">Render background correctly for larger screen res (<strong>Fixed</strong>)<br />
</span></li>
<li><span style="color: #000000;">Render mode 2 sprites correctly (<strong>Fixed</strong>)<br />
</span></li>
<li><span style="color: #000000;">Change screen res for codemaster games (<strong>Fixed</strong>)</span></li>
</ul>
<p><strong>Difficult:</strong></p>
<ul>
<li><span style="color: #000000;">Sound (<strong>Implemented</strong>)<br />
</span></li>
<li><span style="color: #000000;">Fix graphical bugs found in Land of Illusion, Lemmings (<strong>Fixed</strong>)</span></li>
<li><span style="color: #000000;">Fix bug Street Fighter (<strong>Fixed</strong>)</span></li>
<li><span style="color: #000000;">Find out why some roms dont show first screen (<strong>Fixed</strong>)</span></li>
<li><span style="color: #000000;">Fix bug in mortal kombat (<strong>Fixed</strong>)</span></li>
<li><span style="color: #000000;">Fix black graphic flicker in some games (<strong>Fixed</strong>)<br />
</span></li>
</ul>
<p>Whenever I fix one of these items I&#8217;ll edit this post and label them as fixed.</p>
<p>Doesn&#8217;t look too bad does it? <img src='wp-includes/images/smilies/icon_smile.gif' alt=':-)' class='wp-smiley' /> </p>
<p>CS</p>
				</div>

				<p class="postmetadata"> Posted in <a href="indexaa1e.html?cat=4" title="View all posts in Sega Master System" rel="category">Sega Master System</a> |   <a href="index5831.html?p=19#respond" title="Comment on Checklist">No Comments &#187;</a></p>
			</div>

		
		<div class="navigation">
			<div class="alignleft"><a href="index6146.html?paged=2">&laquo; Older Entries</a></div>
			<div class="alignright"></div>
		</div>

	
	</div>

	<div id="sidebar">
		<ul>
						<li>
				<form method="get" id="searchform" action="http://codeslinger.co.uk/pages/blog/wordpress/">
<div><input type="text" value="" name="s" id="s" />
<input type="submit" id="searchsubmit" value="Search" />
</div>
</form>
			</li>

			<!-- Author information is disabled per default. Uncomment and fill in your details if you want to use it.
			<li><h2>Author</h2>
			<p>A little something about you, the author. Nothing lengthy, just an overview.</p>
			</li>
			-->

			
			
			<li><h2>Archives</h2>
				<ul>
					<li><a href='indexd189.html?m=201005' title='May 2010'>May 2010</a></li>
	<li><a href='indexc36d.html?m=200905' title='May 2009'>May 2009</a></li>
	<li><a href='index17e8.html?m=200904' title='April 2009'>April 2009</a></li>
	<li><a href='index10a5.html?m=200903' title='March 2009'>March 2009</a></li>
	<li><a href='index8988.html?m=200902' title='February 2009'>February 2009</a></li>
	<li><a href='index7866.html?m=200812' title='December 2008'>December 2008</a></li>
	<li><a href='index55f6.html?m=200811' title='November 2008'>November 2008</a></li>
	<li><a href='indexa7bc.html?m=200810' title='October 2008'>October 2008</a></li>
	<li><a href='indexe77c.html?m=200809' title='September 2008'>September 2008</a></li>
	<li><a href='indexcffc.html?m=200808' title='August 2008'>August 2008</a></li>
	<li><a href='index0e62.html?m=200807' title='July 2008'>July 2008</a></li>
				</ul>
			</li>

			<li class="categories"><h2>Categories</h2><ul>	<li class="cat-item cat-item-3"><a href="index81ea.html?cat=3" title="View all posts filed under Gameboy">Gameboy</a> (6)
</li>
	<li class="cat-item cat-item-4"><a href="indexaa1e.html?cat=4" title="View all posts filed under Sega Master System">Sega Master System</a> (13)
</li>
	<li class="cat-item cat-item-1"><a href="indexb31a.html?cat=1" title="View all posts filed under Uncategorized">Uncategorized</a> (4)
</li>
	<li class="cat-item cat-item-5"><a href="indexb946.html?cat=5" title="View all posts filed under Zuko">Zuko</a> (1)
</li>
</ul></li>
							
				<li><h2>Meta</h2>
				<ul>
										<li><a href="wp-login.html">Log in</a></li>
					<li><a href="http://validator.w3.org/check/referer" title="This page validates as XHTML 1.0 Transitional">Valid <abbr title="eXtensible HyperText Markup Language">XHTML</abbr></a></li>
					<li><a href="http://gmpg.org/xfn/"><abbr title="XHTML Friends Network">XFN</abbr></a></li>
					<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress</a></li>
									</ul>
				</li>
			
					</ul>
	</div>



<hr />
<div id="footer">
<!-- If you'd like to support WordPress, having the "powered by" link somewhere on your blog is the best way; it's our only promotion or advertising. -->
	<p>
		Emulator Development is proudly powered by
		<a href="http://wordpress.org/">WordPress</a>
		<br /><a href="indexd784.html?feed=rss2">Entries (RSS)</a>
		and <a href="indexa6da.html?feed=comments-rss2">Comments (RSS)</a>.
		<!-- 21 queries. 0.776 seconds. -->
	</p>
</div>
</div>

<!-- Gorgeous design by Michael Heilemann - http://binarybonsai.com/kubrick/ -->

		</body>

<!-- Mirrored from codeslinger.co.uk/pages/blog/wordpress/ by HTTrack Website Copier/3.x [XR&CO'2010], Thu, 11 Aug 2011 17:34:23 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
